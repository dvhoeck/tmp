@{
    ViewBag.Title = "Barcode scanner configuration";
}
<style>
    .md-whiteframe-2dp {
        margin: 5px;
        background-color: #fff;
    }
</style>

<div layout="row" class="errorContainer" layout-align="start center" hide-gt-xs>
    <ng-md-icon icon="warning" class="md-accent" aria-label="Desktop version"></ng-md-icon>
    <span style="font-style:italic;" class="md-warn">&nbsp;This page is optimized for use on a desktop or laptop.</span>
</div>

<div class="md-whiteframe-2dp md-padding" layout="row" layout-align="center center">
    <div layout-align="center center">
        <img src="~/Content/Images/Scanners/ms837.jpg" width="150" height="150" ng-hide="scannerType != 'ms837'" />
        <img src="~/Content/Images/Scanners/Manhattan.jpg" width="150" height="150" ng-hide="scannerType != 'manhattan'" />
        <img src="~/Content/Images/Scanners/Xenon.jpg" width="150" height="150" ng-hide="scannerType != 'honeywell'" />
        <img src="~/Content/Images/Scanners/datalogic.png" width="150" height="150" ng-hide="scannerType != 'datalogic'" />
    </div>
    <md-radio-group ng-model="scannerType" layout="column" data-ng-init="scannerType = 'ms837'" flex>
        <md-radio-button value="ms837" layout="column">
            <h4 class="md-display-1" selected>MS837 (Unitech)</h4>
        </md-radio-button>
        <md-radio-button value="manhattan" layout="column">
            <h4 class="md-display-1">Manhattan</h4>
        </md-radio-button>
        <md-radio-button value="honeywell" layout="column">
            <h4 class="md-display-1">Honeywell</h4>
        </md-radio-button>
        <md-radio-button value="datalogic" layout="column">
            <h4 class="md-display-1">Datalogic</h4>
        </md-radio-button>
    </md-radio-group>
</div>
<note msg="'Pick a scanner and print this page to get started. Scan all barcodes in the order in which they are displayed.'"></note>
<div layout="column" class="layout-wrap @Constants.Strings.AnimationClasses" ng-cloak ng-show="scannerType == 'manhattan'">
    <md-whiteframe class="md-whiteframe-2dp md-padding">
        1. Reset to factory defaults<br />
        <img src="~/Content/Images/Scanners/scan.manhattan.defaults.png" />
    </md-whiteframe>
    <br />
    <md-whiteframe class="md-whiteframe-2dp md-padding">
        2. Start config<br />
        <img src="~/Content/Images/Scanners/scan.manhattan.startNewSettings.png" />
    </md-whiteframe>
    <br />
    <md-whiteframe class="md-whiteframe-2dp md-padding">
        3. Configure beep sounds (choose either Low or Off) <br />
        <img src="~/Content/Images/Scanners/scan.manhattan.sound.png" />
    </md-whiteframe>
    <br />
    <md-whiteframe class="md-whiteframe-2dp md-padding">
        4. Set numerical pad<br />
        <img src="~/Content/Images/Scanners/scan.manhattan.numericalPadOn.png" />
    </md-whiteframe>
    <br />
    <!--
    <md-whiteframe class="md-whiteframe-2dp md-padding">
        5. Use alt method<br />
        <img src="~/Content/Images/Scanners/scan.manhattan.altMethod.png" />
    </md-whiteframe>
    <br />-->
    <md-whiteframe class="md-whiteframe-2dp md-padding">
        5. Set suffix<br />
        <img src="~/Content/Images/Scanners/scan.manhattan.tabSuffix.png" />
    </md-whiteframe>
    <br />
    <!--
    <md-whiteframe class="md-whiteframe-2dp md-padding">
        7. Configure Code 39<br />
        <img src="~/Content/Images/Scanners/scan.manhattan.code39FullASCII.png" />
    </md-whiteframe>
    <br />-->
    <md-whiteframe class="md-whiteframe-2dp md-padding">
        6. Configure input language<br />
        <img src="~/Content/Images/Scanners/scan.manhattan.languageSelection.png" />
    </md-whiteframe>
    <br />
    <!--
    <md-whiteframe class="md-whiteframe-2dp md-padding">
        9. Prefix - set insertion set nr<br />
        <img src="~/Content/Images/Scanners/scan.manhattan.prefix.chooseSet1.png" />
    </md-whiteframe>
    <br />
    <md-whiteframe class="md-whiteframe-2dp md-padding">
        10. Prefix - choose symbology<br />
        <img src="~/Content/Images/Scanners/scan.manhattan.prefix.setCODE139.png" />
    </md-whiteframe>
    <br />
    <md-whiteframe class="md-whiteframe-2dp md-padding">
        11. Prefix - Set insert char position<br />
        <img src="~/Content/Images/Scanners/scan.manhattan.prefix.digit1.png" />
    </md-whiteframe>
    <br />
    <md-whiteframe class="md-whiteframe-2dp md-padding">
        12. Prefix - End insert char position<br />
        <img src="~/Content/Images/Scanners/scan.manhattan.prefix.digitComplete.png" />
    </md-whiteframe>
    <br />
    <md-whiteframe class="md-whiteframe-2dp md-padding">
        13. Prefix - End insert chars <br />
        <img src="~/Content/Images/Scanners/scan.manhattan.prefix.STX.png" />
    </md-whiteframe>
    <br />
    <md-whiteframe class="md-whiteframe-2dp md-padding">
        14. Prefix - End insert chars<br />
        <img src="~/Content/Images/Scanners/scan.manhattan.prefix.charsComplete.png" />
    </md-whiteframe>
    <br />-->
    <md-whiteframe class="md-whiteframe-2dp md-padding">
        7. End scanner config<br />
        <img src="~/Content/Images/Scanners/scan.manhattan.endNewSettings.png" />
    </md-whiteframe>
    <br />
    <md-whiteframe class="md-whiteframe-2dp md-padding">
        8. Save settings<br />
        <img src="~/Content/Images/Scanners/scan.manhattan.saveNewSettings.png" />
    </md-whiteframe>
</div>

<div layout="column" class="layout-wrap @Constants.Strings.AnimationClasses" ng-cloak ng-show="scannerType == 'ms837'">
    <md-whiteframe class="md-whiteframe-2dp md-padding">
        1. Reset to factory settings<br />
        <img src="~/Content/Images/Scanners/scan.ms837.resetToDefaults.png" />
    </md-whiteframe>
    <br />
    <!--
    <md-whiteframe class="md-whiteframe-2dp md-padding">
        2. Enable full ASCII code 39<br />
        <img src="~/Content/Images/Scanners/scan.ms837.fullAsciiCode39.png" />
    </md-whiteframe>
    <br />
        -->
    <md-whiteframe class="md-whiteframe-2dp md-padding">
        2. Disable CR Suffix<br />
        <img src="~/Content/Images/Scanners/scan.ms837.CRSuffixOff.png" />
    </md-whiteframe>
    <br />
    <md-whiteframe class="md-whiteframe-2dp md-padding">
        3. Disable LF Suffix<br />
        <img src="~/Content/Images/Scanners/scan.ms837.LFSuffixOff.png" />
    </md-whiteframe>
    <br />
    <md-whiteframe class="md-whiteframe-2dp md-padding">
        4. Enable TAB suffix<br />
        <img src="~/Content/Images/Scanners/scan.ms837.TabSuffixOn.png" />
    </md-whiteframe>
    <br />
    <!--
    <md-whiteframe class="md-whiteframe-2dp md-padding">
        5. Enable STX prefix<br />
        <img src="~/Content/Images/Scanners/scan.ms837.STXPrefix.png" />
    </md-whiteframe>
    <br />
        -->
    <md-whiteframe class="md-whiteframe-2dp md-padding">
        5. Configure as Belgian keyboard<br />
        <img src="~/Content/Images/Scanners/scan.ms837.BelgianKeyboard.png" />
    </md-whiteframe>
    <br />
    <md-whiteframe class="md-whiteframe-2dp md-padding">
        6. Start multicode setup<br />
        <img src="~/Content/Images/Scanners/scan.ms837.StartMultiCode.png" />
    </md-whiteframe>
    <br />
    <md-whiteframe class="md-whiteframe-2dp md-padding">
        7. Configure minimum scan length<br />
        <img src="~/Content/Images/Scanners/scan.ms837.MinCodeLength.png" />
    </md-whiteframe>
    <br />
    <md-whiteframe class="md-whiteframe-2dp md-padding">
        8. Scan number byte 1/3<br />
        <img src="~/Content/Images/Scanners/scan.ms837.CodeByte0.png" />
    </md-whiteframe>
    <br />
    <md-whiteframe class="md-whiteframe-2dp md-padding">
        9. Scan number byte 2/3 (same digit again)<br />
        <img src="~/Content/Images/Scanners/scan.ms837.CodeByte0.png" />
    </md-whiteframe>
    <br />
    <md-whiteframe class="md-whiteframe-2dp md-padding">
        10. Scan number byte 3/3<br />
        <img src="~/Content/Images/Scanners/scan.ms837.CodeByte2.png" />
    </md-whiteframe>
    <br />
    <md-whiteframe class="md-whiteframe-2dp md-padding">
        11. End and save multicode setup<br />
        <img src="~/Content/Images/Scanners/scan.ms837.StartMultiCode.png" />
    </md-whiteframe>
    <br />
    <!--
    <md-whiteframe class="md-whiteframe-2dp md-padding">
        7. Enable ALT mode<br />
        <img src="~/Content/Images/Scanners/scan.ms837.enableAltMode.png" />
    </md-whiteframe>
    <br />
        -->
</div>
<div layout="column" class="layout-wrap @Constants.Strings.AnimationClasses" ng-cloak ng-show="scannerType == 'datalogic'">
    <md-whiteframe class="md-whiteframe-2dp md-padding">
        1. Enable programming mode<br />
        <img src="~/Content/Images/Scanners/scan.datalogic.programming.png" />
    </md-whiteframe>
    <br />
    <md-whiteframe class="md-whiteframe-2dp md-padding">
        2. Set country code<br />
        <img src="~/Content/Images/Scanners/scan.datalogic.countryCode.png" />
    </md-whiteframe>
    <br />
    <md-whiteframe class="md-whiteframe-2dp md-padding">
        3. Start suffix change<br />
        <img src="~/Content/Images/Scanners/scan.datalogic.suffix.png" />
    </md-whiteframe>
    <br />
    <md-whiteframe class="md-whiteframe-2dp md-padding">
        4. Scan "0"<br />
        <img src="~/Content/Images/Scanners/scan.datalogic.0.png" />
    </md-whiteframe>
    <br />
    <md-whiteframe class="md-whiteframe-2dp md-padding">
        5. Scan "9"<br />
        <img src="~/Content/Images/Scanners/scan.datalogic.9.png" />
    </md-whiteframe>
    <br />
    <md-whiteframe class="md-whiteframe-2dp md-padding">
        6. Confirm suffix change<br />
        <img src="~/Content/Images/Scanners/scan.datalogic.programming.png" />
    </md-whiteframe>
    <br />
    <md-whiteframe class="md-whiteframe-2dp md-padding">
        7. Save changes<br />
        <img src="~/Content/Images/Scanners/scan.datalogic.programming.png" />
    </md-whiteframe>
</div>

<div layout="column" class="layout-wrap @Constants.Strings.AnimationClasses" ng-cloak ng-show="scannerType == 'honeywell'">
    <md-whiteframe class="md-whiteframe-2dp md-padding">
        1. Standard product defaults<br />
        <img src="~/Content/Images/Scanners/scan.honeywell.defaults.png" />
    </md-whiteframe>
    <br />
    <md-whiteframe class="md-whiteframe-2dp md-padding">
        2. USB PC keyboard<br />
        <img src="~/Content/Images/Scanners/scan.honeywell.pcKeyboard.png" />
    </md-whiteframe>
    <br />
    <md-whiteframe class="md-whiteframe-2dp md-padding">
        3. Keyboard country<br />
        <img src="~/Content/Images/Scanners/scan.honeywell.keyboardCountry.png" />
    </md-whiteframe>
    <br />
    <md-whiteframe class="md-whiteframe-2dp md-padding">
        4. Country code "3" for France<br />
        <img src="~/Content/Images/Scanners/scan.honeywell.countryCodeFrance.png" />
    </md-whiteframe>
    <br />
    <md-whiteframe class="md-whiteframe-2dp md-padding">
        5. Save configuration<br />
        <img src="~/Content/Images/Scanners/scan.honeywell.saveSettings.png" />
    </md-whiteframe>
</div>

<script>
    /*
    $(document).ready(function () {
        var startCapture = false;
        var endCapture = false;
        var chars = [];

        // trigger an event on any keypress on this webpage
        $(window).keypress(function (e) {
            // #2 = STX
            if (e.which == 2) {
<img src="~/Content/Images/Scanners/scan.manhattan.defaults.png" />
                startCapture = true
            }

            // #9 = HORIZONTAL TAB
            if(e.which == 9){

            }

            if(startCapture){
                chars.push(e.which);
            }

        }
        //alert("hier");
        // variable to ensure we wait to check the input we are receiving
        // you will see how this works further down
        var pressed = false;
        // Variable to keep the barcode when scanned. When we scan each
        // character is a keypress and hence we push it onto the array. Later we check
        // the length and final char to ensure it is a carriage return - ascii code 13
        // this will tell us if it is a scan or just someone writing on the keyboard
        var chars = [];

        var val = "";
        // trigger an event on any keypress on this webpage
        $(window).keypress(function (e) {
            if (e.which == 2) {
                // 2 means STX
                alert(e.which);
            }
            $("#barcode").val($("#barcode").val() + (e.char));
            val += e.which + ""
            // check the keys pressed are numbers
            //if (e.which >= 48 && e.which <= 57) {
                // if a number is pressed we add it to the chars array
                chars.push(String.fromCharCode(e.which));
            //}
            // debug to help you understand how scanner works
            console.log(e.which + ":" + chars.join("|"));
            // Pressed is initially set to false so we enter - this variable is here to stop us setting a
            // timeout everytime a key is pressed. It is easy to see here that this timeout is set to give
            // us 1 second before it resets everything back to normal. If the keypresses have not matched
            // the checks in the readBarcodeScanner function below then this is not a barcode
            if (pressed == false) {
                // we set a timeout function that expires after 1 sec, once it does it clears out a list
                // of characters
                setTimeout(function () {
                    // check we have a long length e.g. it is a barcode
                    if (chars.length >= 10) {
                        // join the chars array to make a string of the barcode scanned
                        var barcode = chars.join("");
                        // debug barcode to console (e.g. for use in Firebug)
                        console.log("Barcode Scanned: " + barcode);
                        // assign value to some input (or do whatever you want)
                        $("#barcode").val(barcode);
                    }
                    chars = [];
                    pressed = false;
                }, 500);
            }
            // set press to true so we do not reenter the timeout function above
            pressed = true;
        });
    });
    // this bit of code just ensures that if you have focus on the input which may be in a form
    // that the carriage return does not cause your form to be submitted. Some scanners submit
    // a carriage return after all the numbers have been passed.
    $("#barcode").keypress(function (e) {
        if (e.which === 13) {
            console.log("Prevent form submit.");
            e.preventDefault();
        }
    });
    */
</script>